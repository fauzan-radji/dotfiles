exports.id=177,exports.ids=[177],exports.modules={2384:(t,s,e)=>{e.d(s,{HomeWebviewProvider:()=>d});var i=e(9496),o=e(6516),n=e(9529),r=e(5798);let a=new r.jH("repositories/didChange"),h=new r.jH("subscription/didChange"),p=Object.freeze({dispose:()=>{}});class d{constructor(t,s){this.container=t,this.host=s,this._disposable=i.Disposable.from(this.container.git.onDidChangeRepositories(this.onRepositoriesChanged,this),i.workspace.isTrusted?p:i.workspace.onDidGrantWorkspaceTrust(this.notifyDidChangeRepositories,this),this.container.subscription.onDidChange(this.onSubscriptionChanged,this))}_disposable;dispose(){this._disposable.dispose()}onRepositoriesChanged(){this.notifyDidChangeRepositories()}registerCommands(){return[(0,n.xR)(`${this.host.id}.refresh`,()=>this.host.refresh(!0),this)]}includeBootstrap(){return this.getState()}onReloaded(){this.notifyDidChangeRepositories()}onSubscriptionChanged(t){this.notifyDidChangeSubscription(t.current)}async getState(t){return{...this.host.baseWebviewState,repositories:this.getRepositoriesState(),webroot:this.host.getWebRoot(),promoStates:await this.getCanShowPromos(t)}}getRepositoriesState(){return{count:this.container.git.repositoryCount,openCount:this.container.git.openRepositoryCount,hasUnsafe:this.container.git.hasUnsafeRepositories(),trusted:i.workspace.isTrusted}}async getCanShowPromos(t){let s={cw2023:!1,pro50:!1},e=t??await this.container.subscription.getSubscription(!0),i=new Date("2023-12-06T07:59:00.000Z").getTime();return Date.now()<i&&!(0,o.ww)(e)?s.cw2023=!0:null!=t&&((0,o.dz)(t)||(0,o.Z1)(t))&&(s.pro50=!0),s}notifyDidChangeRepositories(){this.host.notify(a,this.getRepositoriesState())}async notifyDidChangeSubscription(t){this.host.notify(h,{promoStates:await this.getCanShowPromos(t)})}}}};